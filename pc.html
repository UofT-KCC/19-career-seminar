<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>UTKCC Career Seminar</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Pretendard",
          "Noto Sans KR", sans-serif;
        background: radial-gradient(circle at top, #0a4c9c, #021933);
        color: #f3f6ff;
      }

      .envelope-section {
        height: 220vh;
        position: relative;
      }

      .envelope-wrapper {
        position: sticky;
        top: 0;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        perspective: 2600px;
      }

      .envelope-scene {
        position: relative;
        width: min(100vw, 1400px);
        height: calc(min(100vw, 1400px) * 1);
        transform-style: preserve-3d;
        transform-origin: center center;
        z-index: 2;
      }

      .scroll-hint {
        position: absolute;
        bottom: 36px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
        font-size: 0.85rem;
        color: rgba(255, 255, 255, 0.82);
        letter-spacing: 0.12em;
        text-transform: uppercase;
        opacity: 1;
        pointer-events: none;
        animation: scrollHintBounce 1.4s ease-in-out infinite;
        transition: opacity 0.25s ease;
      }

      .scroll-hint.hidden {
        opacity: 0;
      }

      .scroll-hint-icon {
        font-size: 1.4rem;
      }

      @keyframes scrollHintBounce {
        0% {
          transform: translateX(-50%) translateY(0);
        }
        50% {
          transform: translateX(-50%) translateY(6px);
        }
        100% {
          transform: translateX(-50%) translateY(0);
        }
      }
      .paper-spacer {
        width: 100%;
        height: 200px;
        background: transparent;
      }
      .paper-inner {
        width: 100%;
        height: 100%;
        padding: 300px 34px 20px;
        display: flex;
        align-items: flex-start;
        justify-content: center;
        transform: translateY(0);
      }

      .invite-card {
        width: 100%;
        max-width: 780px;
        background: #fffbf4;
        border-radius: 24px;
        border: 1px solid rgba(216, 203, 176, 0.7);
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.12);
        padding: 40px 40px 36px;
        color: #3a3a3a;
      }

      .invite-header {
        text-align: center;
        margin-bottom: 36px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 6px;
      }

      .invite-logo {
        width: 120px;
        height: auto;
        margin: 0 auto;
        opacity: 1;
        filter: brightness(0.6) drop-shadow(0 4px 10px rgba(0, 0, 0, 0.15));
      }

      .invite-badge {
        font-size: 0.8rem;
        letter-spacing: 0.16em;
        text-transform: uppercase;
        color: #99907a;
        margin-bottom: 4px;
      }

      .invite-theme {
        font-family: "Playfair Display", "Times New Roman", serif;
        font-size: 2.8rem;
        letter-spacing: 0.12em;
        margin-bottom: 10px;
        color: #16345c;
      }

      .invite-meta {
        font-size: 0.9rem;
        line-height: 1.6;
        color: #7f6c4d;
      }

      .invite-body {
        text-align: center;
      }

      .invite-intro-ko {
        font-size: 0.95rem;
        line-height: 1.7;
        color: #6b665a;
        margin-bottom: 24px;
      }

      .invite-divider {
        width: 64px;
        height: 1px;
        margin: 0 auto 24px;
        background: linear-gradient(
          90deg,
          rgba(182, 162, 124, 0.1),
          #b6a27c,
          rgba(182, 162, 124, 0.1)
        );
      }

      .schedule-title {
        font-size: 1.6rem;
        letter-spacing: 0.18em;
        text-transform: uppercase;
        color: #8d7a55;
        margin-bottom: 18px;
      }

      .schedule-list {
        display: flex;
        flex-direction: column;
        gap: 18px;
        margin-top: 10px;
      }

      .schedule-item {
        display: flex;
        align-items: flex-start;
        gap: 14px;
        padding: 14px 4px;
      }

      .schedule-number {
        width: 34px;
        height: 34px;
        border-radius: 999px;
        border: 1px solid #b29a70;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 1.05rem;
        color: #7b643c;
        margin-top: 4px;
        flex-shrink: 0;
        background: #fffdf7;
      }

      .schedule-text-block {
        text-align: left;
      }

      .schedule-heading {
        font-size: 1.05rem;
        font-weight: 600;
        color: #3f3a32;
        line-height: 1.4;
        margin-bottom: 4px;
      }

      .schedule-desc {
        font-size: 0.9rem;
        font-weight: 400;
        color: #7a7466;
        line-height: 1.6;
      }

      .schedule-separator {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 2px 0 6px;
      }

      .schedule-line {
        flex: 1;
        height: 2px;
        background: #b6a27c;
      }

      .schedule-logo {
        object-fit: contain;
        filter: brightness(0) invert(0.2);
        opacity: 0.5;
      }

      .schedule-logo-left {
        width: 32px;
        height: 32px;
      }

      .schedule-logo-right {
        width: 32px;
        height: 32px;
      }

      .countdown-section {
        margin-top: 36px;
        padding-top: 26px;
        border-top: 1px solid rgba(216, 203, 176, 0.6);
        text-align: center;
      }

      .timezone-toggle {
        display: inline-flex;
        align-items: center;
        padding: 2px;
        border-radius: 999px;
        background: #f4efe4;
        border: 1px solid rgba(216, 203, 176, 0.9);
        margin-bottom: 14px;
      }

      .tz-pill {
        border: none;
        background: transparent;
        font-size: 0.8rem;
        padding: 6px 16px;
        border-radius: 999px;
        cursor: pointer;
        color: #a59a84;
        font-weight: 500;
        transition: background 0.16s ease, color 0.16s ease,
          box-shadow 0.16s ease;
      }

      .tz-pill.active {
        background: #ffffff;
        color: #51432b;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
      }

      .countdown-meta {
        font-size: 0.86rem;
        color: #8b7a60;
        margin-bottom: 14px;
      }

      .countdown-grid {
        display: flex;
        justify-content: center;
        gap: 36px;
        margin-bottom: 16px;
      }

      .countdown-col {
        min-width: 58px;
      }

      .countdown-label {
        font-size: 0.7rem;
        letter-spacing: 0.15em;
        color: #b0a187;
        margin-bottom: 4px;
      }

      .countdown-value {
        font-family: "Playfair Display", "Times New Roman", serif;
        font-size: 1.8rem;
        color: #333132;
      }

      .countdown-caption {
        font-size: 0.88rem;
        color: #746a5a;
      }

      .countdown-caption span {
        color: #c2873c;
        font-weight: 600;
      }

      @media (max-width: 768px) {
        .countdown-grid {
          gap: 18px;
        }

        .countdown-value {
          font-size: 1.5rem;
        }
      }

      @media (max-width: 768px) {
        .paper-inner {
          padding: 52px 16px 40px;
        }

        .invite-card {
          padding: 28px 22px 28px;
          border-radius: 20px;
        }

        .invite-theme {
          font-size: 2.2rem;
        }
      }

      .envelope-image {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        object-fit: contain;
        object-position: center bottom;
        border-radius: 6px;
        transform: translateY(0) scale(1);
        z-index: 1; /* base layer for all envelope images */
      }

      .envelope-cut {
        z-index: 10; /* ensure this is in front of paper and other envelope images */
        opacity: 0;
        pointer-events: none;
      }

      #env-cut {
        transform: translateY(-10%) scale(1);
      }

      .env-body,
      .env-flap {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        object-fit: contain;
        object-position: center bottom;
        display: block;
        transform: translateY(0) scale(1);
      }

      #env-back {
        opacity: 1;
      }

      #env-front {
        opacity: 0;
      }

      #env-front {
        width: 100%;
        height: 100%;
      }

      #env-front {
        transform: translateY(0) scale(1);
      }

      #env-open {
        transform: translateY(-10%) scale(1);
        z-index: 0;
      }

      #env-bg {
        transform: translateY(-10%) scale(1);
        z-index: 14;
      }

      .envelope-cover {
        position: absolute;
        top: 42%;
        left: 50%;
        width: 54.5%;
        object-fit: contain;
        object-position: center bottom;
        transform-style: preserve-3d;
        transform-origin: center top;
        transform: translate(-50%, -50%) rotateX(0deg);
        z-index: 15;
        transition: transform 0.6s ease-out;
      }

      .invite-section {
        max-width: 460px;
        margin: 0 auto 32px;
      }

      .invite-title {
        font-size: 1.6rem;
        letter-spacing: 0.05em;
        text-align: center;
        margin-bottom: 8px;
      }

      .invite-sub {
        text-align: center;
        font-size: 0.95rem;
        color: #666;
        margin-bottom: 26px;
      }

      .invite-row {
        margin-bottom: 20px;
        line-height: 1.6;
        font-size: 0.96rem;
      }

      .invite-label {
        font-weight: 600;
        font-size: 0.9rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: #999;
        margin-bottom: 4px;
      }

      .invite-highlight {
        font-weight: 600;
      }

      .rsvp-button {
        display: inline-block;
        margin-top: 10px;
        padding: 10px 18px;
        border-radius: 999px;
        border: 1px solid #d2c6a1;
        background: #fffaf1;
        font-size: 0.9rem;
        text-decoration: none;
        color: #7b5b35;
        cursor: pointer;
        transition: transform 0.15s ease, box-shadow 0.15s ease,
          background 0.15s ease;
      }

      .rsvp-button:hover {
        transform: translateY(-1px);
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12);
        background: #fff2da;
      }

      .content-section {
        min-height: 120vh;
        padding: 80px 16px 120px;
      }

      .content-section-inner {
        max-width: 720px;
        margin: 0 auto;
        line-height: 1.8;
        font-size: 0.98rem;
        color: #444;
      }

      .content-section h2 {
        font-size: 1.4rem;
        margin-bottom: 18px;
      }

      .after-paper-background {
        width: 0%;
        height: 200px;
        background: radial-gradient(circle at top, #0a4c9c, #021933);
      }
      .sealing-wax {
        position: absolute;
        width: 10%;
        top: 47%;
        left: 45%;
        z-index: 100;
        opacity: 1;
        transition: opacity 0.4s ease-out;
      }
      .paper {
        position: absolute;
        left: 50%;
        width: 53%;
        height: max-content;
        background: #fffdf7;
        border-radius: 6px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
        transform: translate(-50%, -50%) scale(1) rotateX(180deg);
        z-index: 12;
        opacity: 0;
        transition: opacity 0.4s ease-out;
        overflow: hidden;
        border-bottom-left-radius: 28px;
        border-bottom-right-radius: 28px;
      }
    </style>
  </head>
  <body>
    <section class="envelope-section">
      <div class="envelope-wrapper">
        <div class="envelope-scene" id="envelope-scene">
          <div class="envelope" id="envelope">
            <img
              id="env-front"
              class="envelope-image"
              src="images/envelope-front.png"
              alt="Envelope front"
            />
            <img
              id="env-back"
              class="envelope-image"
              src="images/envelope-back.png"
              alt="Envelope back"
            />
            <img
              id="env-open"
              class="envelope-image"
              src="images/envelope-cut.png"
              alt="Open envelope"
            />
            <img
              id="env-bg"
              class="envelope-image"
              src="images/envelope-cut1.png"
              alt="Envelope Background"
            />
            <img
              id="sealing-wax"
              class="sealing-wax"
              src="images/sealing-wax.png"
              alt="sealing-wax"
            />
            <div class="paper" id="paper">
              <div class="paper-inner">
                <div class="invite-card">
                  <header class="invite-header">
                    <img
                      src="images/utkcc-logo.png"
                      alt="UTKCC Logo"
                      class="invite-logo"
                    />
                    <p class="invite-badge">UTKCC CAREER SEMINAR</p>
                    <h1 class="invite-theme">FAIL FORWARD</h1>
                    <p class="invite-meta">
                      11월 22일 오후 8시 EST · 11월 23일 오전 10시 KST<br />
                      @Zoom
                    </p>
                  </header>

                  <section class="invite-body">
                    <p class="invite-intro-ko">
                      선배님들의 진짜 이야기와 함께<br />
                      실패를 앞으로 나아가는 힘으로 바꾸는 시간을 준비했습니다.
                    </p>

                    <div class="invite-divider"></div>

                    <h2 class="schedule-title">Schedule</h2>
                    <div class="schedule-list">
                      <article class="schedule-item">
                        <div class="schedule-number">1</div>
                        <div class="schedule-text-block">
                          <h3 class="schedule-heading">
                            General Panel Side Talk
                          </h3>
                          <p class="schedule-desc">
                            선배님들의 실패 경험과 그 속에서 얻은 인사이트를
                            나누는 패널 세션
                          </p>
                        </div>
                      </article>

                      <div class="schedule-separator">
                        <span class="schedule-line"></span>
                        <img
                          src="images/utkcc-logo.png"
                          alt="UTKCC logo mark"
                          class="schedule-logo schedule-logo-right"
                        />
                      </div>

                      <article class="schedule-item">
                        <div class="schedule-number">2</div>
                        <div class="schedule-text-block">
                          <h3 class="schedule-heading">
                            Career-Specific Breakout Room
                          </h3>
                          <p class="schedule-desc">
                            소규모 네트워킹과 각 분야별 fireside chat으로<br />
                            조금 더 가까이에서 이야기를 나눕니다.
                          </p>
                        </div>
                      </article>

                      <div class="schedule-separator">
                        <img
                          src="images/utkcc-logo.png"
                          alt="UTKCC logo mark"
                          class="schedule-logo schedule-logo-left"
                        />
                        <span class="schedule-line"></span>
                      </div>

                      <article class="schedule-item">
                        <div class="schedule-number">3</div>
                        <div class="schedule-text-block">
                          <h3 class="schedule-heading">Insight Talk</h3>
                          <p class="schedule-desc">
                            실제 사례를 바탕으로 선배님들의 조언과<br />
                            커리어 인사이트를 들어보는 시간
                          </p>
                        </div>
                      </article>

                      <div class="countdown-section">
                        <div
                          class="timezone-toggle"
                          aria-label="Select timezone"
                        >
                          <button class="tz-pill active" data-tz="est">
                            EST
                          </button>
                          <button class="tz-pill" data-tz="kst">KST</button>
                        </div>

                        <div class="countdown-meta" id="countdown-meta">
                          2025.11.22 · 토요일 오후 8시 (EST)
                        </div>

                        <div class="countdown-grid">
                          <div class="countdown-col">
                            <div class="countdown-label">DAYS</div>
                            <div class="countdown-value" id="cd-days">00</div>
                          </div>
                          <div class="countdown-col">
                            <div class="countdown-label">HOUR</div>
                            <div class="countdown-value" id="cd-hours">00</div>
                          </div>
                          <div class="countdown-col">
                            <div class="countdown-label">MIN</div>
                            <div class="countdown-value" id="cd-mins">00</div>
                          </div>
                          <div class="countdown-col">
                            <div class="countdown-label">SEC</div>
                            <div class="countdown-value" id="cd-secs">00</div>
                          </div>
                        </div>

                        <p class="countdown-caption">
                          세미나까지 <span id="cd-days-text">0</span>일
                          남았습니다.
                        </p>
                      </div>
                    </div>
                  </section>
                </div>
              </div>
            </div>
            <div class="paper-spacer"></div>
            <img
              id="env-cut"
              class="envelope-image envelope-cut"
              src="images/envelope-cut.png"
              alt="Envelope cut"
            />
            <img
              id="env-cover"
              class="envelope-cover"
              src="images/envelope-cover.png"
              alt="Envelope cover"
            />
          </div>
        </div>
        <div class="scroll-hint" id="scroll-hint">
          <span>SCROLL DOWN</span>
          <ion-icon
            name="chevron-down-outline"
            class="scroll-hint-icon"
          ></ion-icon>
        </div>
      </div>
    </section>
    <section class="after-paper-background"></section>
    <section class="content-section">
      <div class="content-section-inner"></div>
    </section>

    <script>
      const section = document.querySelector(".envelope-section");
      const scene = document.getElementById("envelope-scene");
      const paper = document.getElementById("paper");
      const paperInner = document.querySelector(".paper-inner");
      const scrollHint = document.getElementById("scroll-hint");

      const envFront = document.getElementById("env-front");
      const envBack = document.getElementById("env-back");
      const envOpen = document.getElementById("env-open");
      const envCut = document.getElementById("env-cut");
      const envBg = document.getElementById("env-bg");
      const sealingWax = document.getElementById("sealing-wax");
      const envCover = document.getElementById("env-cover");

      function onScroll() {
        const windowHeight = window.innerHeight;
        const totalScrollable = section.offsetHeight - windowHeight;
        const start = section.offsetTop;
        let raw = window.scrollY - start;

        if (raw < 0) raw = 0;
        if (raw > totalScrollable) raw = totalScrollable;

        const progress = totalScrollable <= 0 ? 0 : raw / totalScrollable;

        if (scrollHint) {
          if (progress < 0.02) {
            scrollHint.classList.remove("hidden");
          } else {
            scrollHint.classList.add("hidden");
          }
        }

        const ROTATE_END = 0.4;
        let rotatePhase = progress / ROTATE_END;
        if (rotatePhase < 0) rotatePhase = 0;
        if (rotatePhase > 1) rotatePhase = 1;

        const rotateAngle = rotatePhase * 180;
        scene.style.transform = `rotateX(${rotateAngle}deg)`;

        let backOpacity, frontOpacity, openOpacity, cutOpacity;

        if (progress < 0.2) {
          backOpacity = 1;
          frontOpacity = 0;
          openOpacity = 0;
          cutOpacity = 0;
        } else if (progress < 0.4) {
          backOpacity = 0;
          frontOpacity = 1;
          openOpacity = 0;
          cutOpacity = 0;
        } else {
          backOpacity = 0;
          frontOpacity = 0;
          openOpacity = 1;
          cutOpacity = 1;
        }

        envBack.style.opacity = backOpacity;
        envFront.style.opacity = frontOpacity;
        envOpen.style.opacity = openOpacity;
        envCut.style.opacity = cutOpacity;

        // Animation sequence:
        // 1. Envelope flips (rotateAngle 0-180, already happening)
        // 2. Sealing wax fades away (after scene reaches 90deg)
        // 3. Cover flips (after wax fully fades)
        // 4. Paper appears (after cover starts flipping)

        const WAX_FADE_START = 90; // degrees when wax starts fading
        const WAX_FADE_END = 120; // degrees when wax finishes fading

        // Hide sealing-wax and cover before scene rotates to 90deg
        if (rotateAngle < 90) {
          if (sealingWax) sealingWax.style.display = "none";
          if (envCover) envCover.style.display = "none";
          if (envBg) envBg.style.display = "none";
          if (paper) paper.style.display = "none";
        } else {
          if (sealingWax) sealingWax.style.display = "block";
          if (envCover) envCover.style.display = "block";
          if (paper) paper.style.display = "block";
          if (envBg) envBg.style.display = "block";
        }

        // Step 2: Fade sealing wax (90deg ~ 120deg)
        if (sealingWax) {
          let waxOpacity = 1;
          if (rotateAngle < WAX_FADE_START) {
            waxOpacity = 1;
          } else if (rotateAngle >= WAX_FADE_END) {
            waxOpacity = 0;
          } else {
            waxOpacity =
              1 -
              (rotateAngle - WAX_FADE_START) / (WAX_FADE_END - WAX_FADE_START);
          }
          sealingWax.style.opacity = String(
            Math.max(0, Math.min(1, waxOpacity))
          );
        }

        // Step 3: Cover rotation starts only after wax has faded
        // Calculate the progress threshold when wax finishes fading
        const waxFadeThresholdProgress = (WAX_FADE_END / 180) * ROTATE_END;

        let coverRotation = 0;
        if (progress > waxFadeThresholdProgress) {
          // Map remaining progress to cover rotation 0-180deg
          const coverProgress =
            (progress - waxFadeThresholdProgress) /
            (1 - waxFadeThresholdProgress);
          coverRotation = coverProgress * 180;
          if (coverRotation > 180) coverRotation = 180;
          if (coverRotation < 0) coverRotation = 0;
        }

        envCover.style.transform = `translate(-50%, -50%) rotateX(${coverRotation}deg)`;

        // Adjust cover z-index after full rotation
        if (coverRotation >= 180) {
          envCover.style.zIndex = "11";
        } else {
          envCover.style.zIndex = "15";
        }

        // Step 4: Paper appears after cover fully rotates (180deg)
        let paperOpacity = 0;
        if (coverRotation >= 180) {
          paperOpacity = 1;
        }
        paper.style.opacity = paperOpacity;
      }

      window.addEventListener("scroll", onScroll);
      window.addEventListener("load", onScroll);
      window.addEventListener("resize", onScroll);

      const tzButtons = document.querySelectorAll(".tz-pill");
      const countdownMeta = document.getElementById("countdown-meta");
      const cdDays = document.getElementById("cd-days");
      const cdHours = document.getElementById("cd-hours");
      const cdMins = document.getElementById("cd-mins");
      const cdSecs = document.getElementById("cd-secs");
      const cdDaysText = document.getElementById("cd-days-text");

      const eventDates = {
        // 북미 (EST) 시간
        est: {
          key: "est",
          date: new Date("2025-11-22T20:00:00"),
          label: "2025.11.22 · 토요일 오후 8시 (EST)",
        },
        // 한국 (KST) 시간
        kst: {
          key: "kst",
          date: new Date("2025-11-23T10:00:00"),
          label: "2025.11.23 · 일요일 오전 10시 (KST)",
        },
      };

      let currentTz = "est";

      function pad2(num) {
        return String(num).padStart(2, "0");
      }

      function updateCountdown() {
        if (!cdDays || !eventDates[currentTz]) return;

        const now = new Date();
        const target = eventDates[currentTz].date;
        let diffMs = target - now;

        if (diffMs <= 0) {
          cdDays.textContent = "00";
          cdHours.textContent = "00";
          cdMins.textContent = "00";
          cdSecs.textContent = "00";
          cdDaysText.textContent = "0";
          countdownMeta.textContent = eventDates[currentTz].label;
          return;
        }

        const totalSeconds = Math.floor(diffMs / 1000);
        const days = Math.floor(totalSeconds / (24 * 3600));
        const hours = Math.floor((totalSeconds % (24 * 3600)) / 3600);
        const mins = Math.floor((totalSeconds % 3600) / 60);
        const secs = totalSeconds % 60;

        cdDays.textContent = pad2(days);
        cdHours.textContent = pad2(hours);
        cdMins.textContent = pad2(mins);
        cdSecs.textContent = pad2(secs);
        cdDaysText.textContent = days;
        countdownMeta.textContent = eventDates[currentTz].label;
      }

      tzButtons.forEach(btn => {
        btn.addEventListener("click", () => {
          const tz = btn.getAttribute("data-tz");
          if (!tz || tz === currentTz) return;
          currentTz = tz;
          tzButtons.forEach(b => b.classList.remove("active"));
          btn.classList.add("active");
          updateCountdown();
        });
      });

      updateCountdown();
      setInterval(updateCountdown, 1000);
    </script>
  </body>
  <script
    type="module"
    src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
  ></script>
  <script
    nomodule
    src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
  ></script>
</html>
