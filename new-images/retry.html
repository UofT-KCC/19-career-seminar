<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>UTKCC Career Seminar</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Pretendard",
          "Noto Sans KR", sans-serif;
        background: radial-gradient(circle at top, #0a4c9c, #021933);
        color: #f3f6ff;
        width: 100svw;
        min-height: 100dvh;
        min-height: 100svh;
        min-height: 100vh;
      }

      .envelope-section {
        position: relative;
        width: 100%;
        height: 500vh;
      }

      .envelope-img-group {
        position: sticky;
        top: 0;
        width: 100%;
        height: 100svh;
        height: 100vh;
        transform-style: preserve-3d;
        perspective: 2000px;
      }

      .envelope-item {
        object-fit: contain;
        width: 80vmin;
        width: 1256px;
        height: calc(80 * 886 / 1256) vmin;
        height: 886px;
      }

      .envelope-center {
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%) scale(0.6);
      }

      #env-back {
        z-index: 5;
      }

      #env-front {
        z-index: 1;
      }

      #env-cover {
        transform: translate(-50%, -50%) scale(0.6);
        object-position: center top;
        filter: brightness(1.15);
        transform-style: preserve-3d;
        transform-origin: center top;
        width: 100%;
        object-fit: contain;
      }

      #sealing-wax-container {
        z-index: 4;
      }

      #sealing-wax {
        position: relative;
        left: 43%;
        top: 46%;
      }

      #paper {
        height: 2000px;
        width: 1240px;
        transform: translate(-50%, -80%) scale(0.6);
        background-color: white;
        z-index: 2;
      }

      #env-cover-container {
        z-index: 4;
      }

      #env-top {
        z-index: 3;
      }
    </style>
  </head>
  <body>
    <section class="envelope-section">
      <div class="envelope-img-group">
        <img
          class="envelope-item envelope-center"
          id="env-back"
          src="./envelope-back.png"
        />
        <img
          class="envelope-item envelope-center"
          id="env-top"
          src="./envelope-top.png"
        />
        <img
          class="envelope-item envelope-center"
          id="env-cut"
          src="./envelope-cut.png"
        />
        <div class="envelope-item envelope-center" id="env-cover-container">
          <img src="./envelope-cover.png" id="env-cover" />
        </div>
        <div class="envelope-item envelope-center" id="sealing-wax-container">
          <img src="./sealing-wax.png" id="sealing-wax" />
        </div>
        <div class="envelope-center" id="paper"></div>
      </div>
    </section>

    <script>
      const imgGroup = document.querySelector(".envelope-img-group");
      const section = document.querySelector(".envelope-section");
      const envBack = document.getElementById("env-back");
      const envCover = document.getElementById("env-cover");
      const envCoverContainer = document.getElementById("env-cover-container");
      const sealingWax = document.getElementById("sealing-wax");
      const paper = document.getElementById("paper");

      function onScroll() {
        const sectionRect = section.getBoundingClientRect();
        const sectionTop = sectionRect.top;
        const sectionHeight = section.offsetHeight;
        const viewportHeight = window.innerHeight;

        // 전체 스크롤 진행도 계산 (0 ~ 1)
        let totalProgress = -sectionTop / (sectionHeight - viewportHeight);
        totalProgress = Math.max(0, Math.min(1, totalProgress));

        // 첫 50%: envelope-img-group 회전 (0도 ~ 180도)
        const groupProgress = Math.min(totalProgress * 2, 1);
        const groupRotateAngle = groupProgress * 180;
        imgGroup.style.transform = `rotateX(${groupRotateAngle}deg)`;

        // 90도 이상 회전하면 env-back 숨기기
        if (groupRotateAngle >= 90) {
          envBack.style.display = "none";
        } else {
          envBack.style.display = "block";
        }

        // sealing-wax opacity: 160~180도 사이에서 1 → 0
        let waxOpacity = 1;
        if (groupRotateAngle < 160) {
          waxOpacity = 1;
        } else if (groupRotateAngle >= 180) {
          waxOpacity = 0;
        } else {
          // 160~180도: 1 → 0
          waxOpacity = 1 - (groupRotateAngle - 160) / 20;
        }
        sealingWax.style.opacity = waxOpacity;

        // 나머지 50%: env-cover 회전 (0도 ~ 180도)
        let coverProgress = 0;
        if (totalProgress > 0.5) {
          coverProgress = (totalProgress - 0.5) * 2;
        }
        const coverRotateAngle = coverProgress * 180;
        envCover.style.transform = `rotateX(${coverRotateAngle}deg)`;

        // env-cover가 90도 이상이면 z-index 1로 낮춤
        if (coverRotateAngle >= 90) {
          envCoverContainer.style.zIndex = "1";
        } else {
          envCoverContainer.style.zIndex = "3";
        }

        // paper opacity: env-cover가 90도~180도 사이에서 0 → 1
        let paperOpacity = 0;
        if (coverRotateAngle < 90) {
          paperOpacity = 0;
        } else if (coverRotateAngle >= 180) {
          paperOpacity = 1;
        } else {
          // 90~180도: 0 → 1
          paperOpacity = (coverRotateAngle - 90) / 90;
        }
        paper.style.opacity = paperOpacity;
      }

      window.addEventListener("scroll", onScroll);
      window.addEventListener("load", onScroll);
      window.addEventListener("resize", onScroll);
    </script>
  </body>
  <script
    type="module"
    src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
  ></script>
  <script
    nomodule
    src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
  ></script>
</html>
